(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{193:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(0),i=n.n(o),s=n(2),c=n.n(s),u=n(7),l=n(24),m=n(3),p=n(17);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var y=function(e){var t=e.question,n=e.text,a=[];return t.pivot&&a.push(t.pivot.relation),t.relations&&a.push.apply(a,f(t.relations.map((function(e){return e.pivot.relation})))),i.a.createElement("li",{key:t.id,className:"collection-item"},i.a.createElement(p.b,{to:"/questions/".concat(t.id),className:"truncate"},n),i.a.createElement("p",{className:"subject"},i.a.createElement("i",{className:"material-icons"},"book"),i.a.createElement("span",null,t.subject.name)),i.a.createElement("div",null,i.a.createElement("p",{className:"tags"},i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"material-icons"},"label_outline"),i.a.createElement("span",null,t.tags&&t.tags.length?t.tags:"Sem tags"))),i.a.createElement("p",{className:"crud-icons"},a.includes("owner")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"tooltipped","data-position":"bottom","data-tooltip":"Editar",onClick:function(){return e.editQuestionHandler(t.id)}},i.a.createElement("i",{className:"material-icons blue-text"},"edit")),i.a.createElement("button",{className:"tooltipped","data-position":"bottom","data-tooltip":"Excluir",onClick:function(){return e.deleteQuestionHandler(t.id)}},i.a.createElement("i",{className:"material-icons red-text"},"delete"))),a.includes("bookmark")?i.a.createElement("button",{className:"tooltipped","data-position":"bottom","data-tooltip":"Remover dos Favoritos",onClick:function(){return e.unbookmarkQuestionHandler(t.id)}},i.a.createElement("i",{className:"material-icons yellow-text text-darken-1"},"star")):i.a.createElement("button",{className:"tooltipped","data-position":"bottom","data-tooltip":"Adicionar aos Favoritos",onClick:function(){return e.bookmarkQuestionHandler(t.id)}},i.a.createElement("i",{className:"material-icons yellow-text text-darken-1"},"stars")))))};y.propTypes={bookmarkQuestionHandler:r.a.func,deleteQuestionHandler:r.a.func,editQuestionHandler:r.a.func,question:r.a.shape({id:r.a.any,pivot:r.a.shape({relation:r.a.any}),relations:r.a.shape({map:r.a.func}),subject:r.a.shape({name:r.a.any}),tags:r.a.shape({length:r.a.any})}),text:r.a.any,unbookmarkQuestionHandler:r.a.func};var b=y,E=n(25),h=function(e){if(e.lastPage<=1)return null;for(var t=[],n=function(n){var a=["button"];e.currentPage===n&&a.push("active"),t.push(i.a.createElement("button",{onClick:function(){return e.changePageHandler(n)},className:a.join(" ")},n))},a=1;a<=e.lastPage;a++)n(a);return i.a.createElement("div",{className:"paginator"},t)};h.propTypes={changePageHandler:r.a.func,currentPage:r.a.any,lastPage:r.a.any};var v=h;function g(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A={questions:[],isLoading:!1,error:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_START":return T(T({},e),{},{isLoading:!0});case"REQUEST_SUCCESS":return{isLoading:!1,questions:t.questions,error:null};case"REQUEST_FAIL":return{isLoading:!1,questions:null,error:t.error};default:return e}},Q=function(e){var t=S(Object(o.useReducer)(w,A),2),n=t[0],a=t[1],r=S(Object(o.useState)(0),2),s=r[0],m=r[1],p=S(Object(o.useState)(0),2),f=p[0],d=p[1],y=e.location;Object(o.useEffect)((function(){a({type:"REQUEST_START"});var e=y.pathname+y.search;c.a.get(e).then((function(e){if(200===e.status){console.log(e);var t=e.data.data;y.search||(t=t.filter((function(e){var t=e.relations.map((function(e){return e.pivot.relation}));return"/questions"===y.pathname?t.includes("owner"):t.includes("bookmark")}))),a({type:"REQUEST_SUCCESS",questions:t}),m(e.data.last_page),d(e.data.current_page),Object(E.a)()}})).catch((function(e){console.error(e),a({type:"REQUEST_FAIL",error:e})}))}),[c.a,y]);var h=function(t){e.history.push("/questions/".concat(t,"/edit"))},k=function(e){a({type:"REQUEST_START"}),c.a.delete("/questions/".concat(e)).then((function(t){200===t.status&&(a({type:"REQUEST_SUCCESS",questions:n.questions.filter((function(t){return t.id!==e}))}),Object(E.a)())})).catch((function(e){a({type:"REQUEST_FAIL",error:e})}))},j=function(e){a({type:"REQUEST_START"}),c.a.post("/questions/".concat(e,"/bookmark")).then((function(t){if(200===t.status){var r=n.questions.findIndex((function(t){return t.id===e})),o=T({},n.questions[r]);o.relations&&Array.isArray(o.relations)?o.relations=o.relations.concat([{pivot:{relation:"bookmark"}}]):o.relations=[{pivot:{relation:"bookmark"}}];var i=g(n.questions);i[r]=o,a({type:"REQUEST_SUCCESS",questions:i}),Object(E.a)()}})).catch((function(e){a({type:"REQUEST_FAIL",error:e})}))},O=function(t){a({type:"REQUEST_START"}),c.a.delete("/questions/".concat(t,"/unbookmark")).then((function(r){if(200===r.status){var o=n.questions.findIndex((function(e){return e.id===t})),i=T({},n.questions[o]);if(i.relations){var s=i.relations.filter((function(e){return"bookmark"!==e.pivot.relation}));i.relations=s}var c=null;"/questions/bookmarks"===e.location.pathname?c=n.questions.filter((function(e){return e.id!==i.id})):(c=g(n.questions))[o]=i,a({type:"REQUEST_SUCCESS",questions:c}),Object(E.a)()}})).catch((function(e){a({type:"REQUEST_FAIL",error:e})}))},q=null;return q=n.isLoading?i.a.createElement(u.a,null):n.error?i.a.createElement(l.a,{message:n.error.message}):n.questions.length?i.a.createElement("div",null,i.a.createElement("ul",{className:"collection"},n.questions.map((function(e){var t=document.createElement("div");t.innerHTML=e.content;var n=t.innerText;return i.a.createElement(b,{key:e.id,question:e,text:n,editQuestionHandler:h,bookmarkQuestionHandler:j,unbookmarkQuestionHandler:O,deleteQuestionHandler:k})}))),i.a.createElement(v,{lastPage:s,currentPage:f,changePageHandler:function(t){if(console.log(t),t!==f){d(t);var n=new URLSearchParams(e.location.search),a=e.location.pathname+"?page="+t;n.get("query")&&(a+="&query="+n.get("query")),e.history.push(a)}}})):i.a.createElement("h6",null,"Sem Quest√µes"),i.a.createElement("div",{className:"questions-list"},q)};Q.propTypes={history:r.a.shape({push:r.a.func}),location:r.a.shape({pathname:r.a.any,search:r.a.any})};t.default=Object(m.f)(Q)},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{enterDelay:400})}}}]);